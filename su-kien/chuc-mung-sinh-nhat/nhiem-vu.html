<div class="modal modal__content" id="modal__mission" style="display: none;">
    <div class="content-modal p-r">
        <div class="wrapper-modal">
            
            <div class="title-modal tCenter tUpper flex act jct fRobotoB">
                <div class="name__tit">Nhận Lượt</div>
            </div>
            <div class="tct">
                <img src="../../assets/frontend/events/sinhnhat2025/images/modal/line.png" class="imgLineMD">
            </div>

            <div class="m--modal  mt-3per">
                <div class="list-mission f-utm_swiss_condensed_b">
                    <div class="item-mission itemMs__null dFlex aCenter jCenter m__inline">
                        <div class="stt dFlex aCenter jCenter">
                        <img src="../../assets/frontend/events/sinhnhat2025/images/modal/stt.png" alt="">
                        </div>
                        <div class="des-mission">
                        <div class="des-top dFlex">
                            <span class="c-yp cBlue fRobotoB">Nhiệm vụ hằng ngày</span>
                        </div>
                        </div>
                        <div style="opacity: 0;"
                        class="btn-get-luot btPop fRobotoB  c-pointer tUpper tCenter dFlex aCenter jCenter  btn-tranY"><span>Báo
                            Danh</span></div>
                    </div>
                    
                                    </div>

                <div class="list-mission">
                    <div class="item-mission itemMs__null dFlex aCenter jCenter m__inline">
											<div class="stt dFlex aCenter jCenter">
												<img src="../../assets/frontend/events/sinhnhat2025/images/modal/stt.png" alt="">
											</div>
											<div class="des-mission">
												<div class="des-top dFlex">
													<span class="c-yp cBlue fRobotoB">Nhiệm vụ tuần hoàn:</span>
												</div>
											</div>
											<div style="opacity: 0;"
												class="btn-get-luot btPop fRobotoB  c-pointer tUpper tCenter dFlex aCenter jCenter  btn-tranY"><span>Báo
													Danh</span></div>
										</div>
                                    </div>
            </div>
            <div class="close_modal"></div>
        </div>
    </div>
</div>

<script>
    var facebookShare = function () {
        $.get("chia-se-facebook.json", function (resp) {
            setTimeout(function () {
                showMisison();
                customAlert(resp.message)
            }, 2000);
        }, 'json');
        var url = "../chuc-mung-sinh-nhat.html";
        var options = 'toolbar=0,status=0,resizable=1,width=626,height=436';
        //window.open(url,'joingroup');

        shareOnFacebook(url);
    };
    var facebookJoinGroup = function (code) {
        $.get("tham-gia-facebook.json", function (resp) {
            setTimeout(function () {
                showMisison();
                customAlert(resp.message)
            }, 2000);
        }, 'json');
        var url = "https://www.facebook.com/groups/958640695290292";
        var options = 'toolbar=0,status=0,resizable=1,width=626,height=436';
        window.open(url,'joingroup');
    };
    var makeTask = function (taskCode) {
        $.post('https://rongthansieucap.vn/su-kien/chuc-mung-sinh-nhat/kiem-tra-nhiem-vu/' + taskCode, function (resp) {
            if(resp.status == 1) {
                showMisison();
            }
            customAlert(resp.message)
        }, 'json');
    };
    var completeTask = function (taskCode) {
        $.post('https://rongthansieucap.vn/su-kien/chuc-mung-sinh-nhat/hoan-thanh-nhiem-vu/' + taskCode, function (resp) {
            if(resp.status == 1) {
                showMisison();
                getUserInfo();
            }
            customAlert(resp.message)
        }, 'json');
    };

    function shareOnFacebook(url) {
        const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
        
        // Calculate popup dimensions and position
        const popupWidth = 600;
        const popupHeight = 400;
        const screenWidth = window.screen.width;
        const screenHeight = window.screen.height;
        const left = (screenWidth - popupWidth) / 2;
        const top = (screenHeight - popupHeight) / 2;

        // Open popup window in center of the screen
        const popup = window.open(facebookUrl, '_blank', `width=${popupWidth},height=${popupHeight},left=${left},top=${top}`);
        
        // Focus the popup (if allowed by the browser)
        if (popup) {
            popup.focus();
        }
        }
        
        // Usage
        if (document.getElementById('sharefb')) {
            var shareUrl = '../chuc-mung-sinh-nhat.html';
            document.getElementById('sharefb').addEventListener('click', function() {
                shareOnFacebook(shareUrl);
            });
        }
</script>